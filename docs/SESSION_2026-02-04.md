# DeskOn 개발 세션 - 2026년 2월 4일

## 오늘 완료한 작업

### 1. AWS 서버 배포 ✅
- **EC2 인스턴스**: Ubuntu 24.04, t2.micro
- **퍼블릭 IP**: 3.39.231.177
- **도메인**: desk.on1.kr
- **서비스**:
  - hbbs (ID 서버): 포트 21116
  - hbbr (릴레이 서버): 포트 21117
- **서버 공개키**: `Q2VDXGGdBcNh1ssDqj6EP1oXMKJ1UKVfVNs4LzkbwCU=`

### 2. 앱 브랜딩 변경 ✅
- **앱 이름**: Deskon (→ 추후 DeskOn으로 수정 예정)
- **패키지 ID**: kr.on1.desk
- **URL 스킴**: deskon://
- **플랫폼별 설정**:
  - macOS: AppInfo.xcconfig
  - Windows: Runner.rc
  - Android: AndroidManifest.xml
  - iOS: Info.plist
  - Linux: rustdesk.desktop

### 3. 서버 연결 설정 ✅
- **서버 주소**: desk.on1.kr (하드코딩)
- **서버 공개키**: config.rs에 RS_PUB_KEY 추가
- **위치**: libs/hbb_common/src/config.rs

### 4. 웹사이트 배포 ✅
- **URL**: http://desk.on1.kr
- **기능**: 랜딩 페이지 + 다운로드 링크
- **서버**: nginx on EC2
- **파일**: infrastructure/web/index.html

### 5. GitHub Actions 빌드
- **저장소**: https://github.com/cho-y-j/rustdesk
- **워크플로우**: flutter-nightly.yml
- **빌드 결과물**:
  - Android APK (universal, arm64, armv7, x86_64)
  - Windows (32bit, 64bit)
  - macOS (Intel, Apple Silicon)
  - Linux (x86_64, aarch64, AppImage, deb)
  - iOS IPA

---

## 주요 파일 변경

| 파일 | 변경 내용 |
|------|----------|
| `libs/hbb_common/src/config.rs` | 서버 주소, 공개키 설정 |
| `flutter/macos/Runner/Configs/AppInfo.xcconfig` | macOS 앱 이름, 번들 ID |
| `flutter/windows/runner/Runner.rc` | Windows 앱 정보 |
| `flutter/android/app/src/main/AndroidManifest.xml` | Android 앱 이름, 스킴 |
| `flutter/ios/Runner/Info.plist` | iOS 앱 이름 |
| `res/rustdesk.desktop` | Linux 데스크톱 엔트리 |
| `infrastructure/web/index.html` | 랜딩 페이지 |
| `infrastructure/aws/docker-compose.yml` | 서버 Docker 설정 |

---

## AWS 보안 그룹 포트

| 포트 | 프로토콜 | 용도 |
|------|----------|------|
| 22 | TCP | SSH |
| 80 | TCP | 웹사이트 (nginx) |
| 21115 | TCP | NAT 테스트 |
| 21116 | TCP/UDP | ID 서버 |
| 21117 | TCP | 릴레이 서버 |
| 21118 | TCP | 웹 클라이언트 |
| 21119 | TCP | 웹 클라이언트 |

---

## 다음 할 일

1. [ ] 앱 이름 수정: Deskon → **DeskOn** (대문자 O)
2. [ ] macOS Apple Silicon 빌드 오류 수정
3. [ ] 연결 테스트 (새 빌드로)
4. [ ] Play Store / App Store 등록 준비
5. [ ] 유료 버전 기능 (로그인, 내 컴퓨터 동기화)

---

## 접속 정보

- **GitHub**: https://github.com/cho-y-j/rustdesk
- **웹사이트**: http://desk.on1.kr
- **서버 SSH**: `ssh -i deskon-key.pem ubuntu@3.39.231.177`
- **빌드 확인**: https://github.com/cho-y-j/rustdesk/actions

---

## 라이선스 참고

- 원본: RustDesk (AGPL-3.0)
- Play Store 등록 가능 (소스코드 공개 + 원본 크레딧 필요)
